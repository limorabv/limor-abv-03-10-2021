(this["webpackJsonpreact-complete-guide"]=this["webpackJsonpreact-complete-guide"]||[]).push([[0],{16:function(e,t,c){e.exports={header:"MainHeader_header__3jG-X",active:"MainHeader_active__11wpQ"}},34:function(e,t,c){},36:function(e,t,c){},38:function(e,t,c){},39:function(e,t,c){},44:function(e,t,c){},45:function(e,t,c){"use strict";c.r(t);var r=c(13),n=c.n(r),a=c(10),i=c(8),s=c(17),o=Object(s.b)({name:"currentCity",initialState:{cityName:"",cityId:"",currWeather:{temperature:{imperial:null,metric:null},weatherIcon:null,weatherText:""}},reducers:{updateCurrentCity:function(e,t){e.cityName=t.payload.cityName,e.cityId=t.payload.cityId},updateCurrentWeather:function(e,t){e.currWeather.weatherText=t.payload.weatherText,e.currWeather.weatherIcon=t.payload.weatherIcon,e.currWeather.temperature.imperial=t.payload.imperial,e.currWeather.temperature.metric=t.payload.metric}}}),u=Object(s.b)({name:"favorites",initialState:{favList:[]},reducers:{addFavorite:function(e,t){e.favList.push(t.payload)},removeFavorite:function(e,t){var c=e.favList.findIndex((function(e){return e.id===t.payload}));e.favList.splice(c,1)}}}),l=Object(s.a)({reducer:{currentCity:o.reducer,favorites:u.reducer}}),d=u.actions,j=o.actions,h=l,p=(c(34),c(3)),f=c(9),b=c.n(f),v=c(11),m=c(0),x=c(24),O=c(12),y=(c(21),"FDuD29dgrGUnnd9J2Q14p8QudfZvNB1l"),g=(c(36),c(1)),w=function(e){var t="card "+e.className;return Object(g.jsx)("div",{className:t,children:e.children})},C=(c(38),function(e){var t=Object(m.useState)([]),c=Object(x.a)(t,2),r=c[0],n=c[1],a=function(){var e=Object(v.a)(b.a.mark((function e(t){var c,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://dataservice.accuweather.com/forecasts/v1/daily/5day/".concat(t,"?apikey=").concat(y));case 3:return c=e.sent,e.next=6,c.json();case 6:r=e.sent,n(r.DailyForecasts),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),O.a.error("faild to load forcast");case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),i=function(e){var t=new Date(Date.parse(e));console.log(Date.parse(e));var c=new Date(Date.UTC(e+""));return console.log("parse date"+c),t.toLocaleString("en-US",{weekday:"short"})};return Object(m.useEffect)((function(){a(e.cityId)}),[e.cityId]),Object(g.jsx)("ul",{className:"forcast-list",children:r.map((function(e){return Object(g.jsx)(w,{className:"forcast-item",children:Object(g.jsxs)("li",{children:[Object(g.jsx)("p",{children:i(e.Date)}),Object(g.jsxs)("p",{children:[e.Temperature.Minimum.Value,Object(g.jsx)("span",{children:"\xb0F"})]}),Object(g.jsx)("img",{src:"https://developer.accuweather.com/sites/default/files/".concat(String(e.Day.Icon).padStart(2,"0"),"-s.png")}),Object(g.jsx)("p",{children:e.Day.IconPhrase})]},new Date(Date.UTC(e.EpochDate)))})}))})});c(39);O.a.configure();var I=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.currentCity.cityName})),c=Object(i.c)((function(e){return e.currentCity.currWeather})),r=Object(i.c)((function(e){return e.currentCity.cityId})),n=Object(i.c)((function(e){return e.favorites.favList})),a=Object(p.g)(),s=Object(p.f)(),o=n.find((function(e){return e.id===r})),u=function(){var t=Object(v.a)(b.a.mark((function t(c){var r,n,a,i;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("inside fetch city"),t.prev=1,t.next=4,fetch("https://dataservice.accuweather.com/locations/v1/cities/autocomplete/?apikey=".concat(y,"&q=").concat(c));case 4:return r=t.sent,t.next=7,r.json();case 7:n=t.sent,a=n[0].Key,i=n[0].LocalizedName,e(j.updateCurrentCity({cityName:i,cityId:a})),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(1),O.a.error("city search faild"),console.log("city search faild");case 17:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e){return t.apply(this,arguments)}}(),l=function(){var t=Object(v.a)(b.a.mark((function t(c){var n,a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("https://dataservice.accuweather.com/currentconditions/v1/".concat(r,"?apikey=").concat(y));case 3:return n=t.sent,t.next=6,n.json();case 6:a=t.sent,e(j.updateCurrentWeather({weatherText:a[0].WeatherText,weatherIcon:a[0].WeatherIcon,imperial:a[0].Temperature.Imperial.Value,metric:a[0].Temperature.Metric.Value})),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),O.a.error("failed fetching weather"),console.log("failed fetching weather");case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}(),h=function(){var t=Object(v.a)(b.a.mark((function t(c){var r,n,a,i,s,o;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=c.coords.latitude,n=c.coords.longitude,console.log("lat: ".concat(r,", lon: ").concat(n)),t.next=6,fetch("http://dataservice.accuweather.com/locations/v1/cities/geoposition/search?q=".concat(r,",").concat(n,"&apikey=").concat(y));case 6:return a=t.sent,t.next=9,a.json();case 9:i=t.sent,console.log(i),s=i.LocalizedName,o=i.Key,console.log("from sucsses func id: ".concat(o)),e(j.updateCurrentCity({cityName:s,cityId:o})),t.next=21;break;case 17:t.prev=17,t.t0=t.catch(0),console.log(t.t0),O.a.error("error");case 21:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(e){return t.apply(this,arguments)}}();return a.name?u(a.name):"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(h,(function(){u("Tel Aviv")})),Object(m.useEffect)((function(){console.log("inside use effect:"+r);var e=function(){var e=Object(v.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(r);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[t,r]),console.log(r),Object(g.jsxs)(m.Fragment,{children:[Object(g.jsx)("form",{onSubmit:function(e){e.preventDefault()},children:Object(g.jsxs)("div",{className:"input-container",children:[Object(g.jsx)("input",{type:"search",id:"city-input"}),Object(g.jsx)("button",{type:"submit",onClick:function(e){var t=document.querySelector("#city-input").value;s.push("/city/".concat(t))},children:" Search "})]})}),Object(g.jsx)(w,{className:"city",children:t&&Object(g.jsxs)("div",{children:[Object(g.jsx)("h2",{class:"city-title",children:t}),console.log(c.temperature),c&&Object(g.jsxs)("h2",{children:[c.temperature.imperial,Object(g.jsx)("span",{children:"\xb0F"})]}),c&&Object(g.jsx)("h3",{children:c.weatherText}),Object(g.jsx)("img",{src:"https://developer.accuweather.com/sites/default/files/".concat(String(c.weatherIcon).padStart(2,"0"),"-s.png")}),Object(g.jsx)(C,{cityId:r}),Object(g.jsx)("button",{className:"fav-btn ",class:"btn btn-success",onClick:o?function(){e(d.removeFavorite(r))}:function(){e(d.addFavorite({name:t,id:r,currentWeather:c.weatherText,currentTemp:c.temperature.imperial}))},children:o?"Remove Favorite":"Add Favorite"})]})})]})},N=function(){return Object(g.jsx)("div",{children:Object(g.jsx)(I,{})})},k=(c(44),function(){var e=Object(i.c)((function(e){return e.favorites.favList})),t=Object(i.b)();return Object(g.jsxs)(m.Fragment,{children:[Object(g.jsx)("h1",{children:"The Favorites Page"}),Object(g.jsx)("ul",{children:e.map((function(e){return Object(g.jsxs)("li",{className:"favorite-item",children:[Object(g.jsxs)(a.b,{to:"/city/".concat(e.name),children:[" ",e.name," "]}),Object(g.jsx)("p",{children:e.currentWeather}),Object(g.jsx)("button",{onClick:function(){t(d.removeFavorite(e.id))},children:"remove"})]})}))})]})}),D=c(16),F=c.n(D),T=function(){return Object(g.jsx)("header",{className:F.a.header,children:Object(g.jsx)("nav",{children:Object(g.jsxs)("ul",{children:[Object(g.jsx)("li",{children:Object(g.jsx)(a.c,{activeClassName:F.a.acwtive,to:"/",exact:!0,children:"Home"})}),Object(g.jsx)("li",{children:Object(g.jsx)(a.c,{activeClassName:F.a.active,to:"/favorites",children:"Favorites"})})]})})})};var S=function(){return Object(g.jsxs)("div",{children:[Object(g.jsx)(T,{}),Object(g.jsx)("main",{children:Object(g.jsxs)(p.c,{children:[Object(g.jsx)(p.a,{path:"/",exact:!0,children:Object(g.jsx)(N,{})}),Object(g.jsx)(p.a,{path:"/favorites",exact:!0,children:Object(g.jsx)(k,{})}),Object(g.jsx)(p.a,{path:"/city/:name",exact:!0,children:Object(g.jsx)(I,{})})]})})]})};n.a.render(Object(g.jsx)(a.a,{children:Object(g.jsx)(i.a,{store:h,children:Object(g.jsx)(S,{})})}),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.5efaa09d.chunk.js.map